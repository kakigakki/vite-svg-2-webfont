"use strict";var Y=Object.create;var p=Object.defineProperty;var j=Object.getOwnPropertyDescriptor;var B=Object.getOwnPropertyNames;var V=Object.getPrototypeOf,q=Object.prototype.hasOwnProperty;var K=(e,t)=>{for(var n in t)p(e,n,{get:t[n],enumerable:!0})},E=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of B(t))!q.call(e,a)&&a!==n&&p(e,a,{get:()=>t[a],enumerable:!(r=j(t,a))||r.enumerable});return e};var x=(e,t,n)=>(n=e!=null?Y(V(e)):{},E(t||!e||!e.__esModule?p(n,"default",{value:e,enumerable:!0}):n,e)),X=e=>E(p({},"__esModule",{value:!0}),e);var ie={};K(ie,{default:()=>se,templates:()=>oe,viteSvgToWebfont:()=>k});module.exports=X(ie);var U=require("util"),C=require("path"),F=x(require("@vusion/webfonts-generator"),1);var G=require("fs"),g=require("path"),f=require("fs/promises"),I,W={eot:"application/vnd.ms-fontobject",svg:"image/svg+xml",ttf:"application/x-font-ttf",woff:"application/font-woff",woff2:"font/woff2"};async function J(e,t){let n=(0,g.resolve)(e,t);try{return await(0,f.access)(n,G.constants.R_OK),!0}catch{return!1}}async function Q(e,{eventType:t,filename:n},r,a=J){t!=="rename"||!n.endsWith(".svg")||!await a(e,n)||r({eventType:t,filename:n})}async function $(e,t,n){try{I=(0,f.watch)(e,{signal:t});for await(let r of I)Q(e,r,n)}catch(r){if(r.name==="AbortError")return;throw r}}var P="qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM1234567890";function R(e=8){let t="";for(let n=0;n<e;n++){let r=Math.floor(Math.random()*P.length);t+=P[r]}return t}function S(e){var n;return!!((n=/(?:\.([^.]+))?$/.exec(e||""))!=null&&n[1])}async function b(e,t){let n={mode:511,recursive:!0};await(0,f.mkdir)((0,g.dirname)(t),n),await(0,f.writeFile)(t,e)}var M=x(require("glob"),1),l=require("path");var h=class extends Error{},T=class extends Error{constructor(t){super(`WriteFiles option received invalid types: ${t.join(", ")}`)}};var{sync:Z}=M.default,A=["html","css","fonts"];function ee({types:e}){return Array.isArray(e)?e:e?[e]:["eot","woff","woff2","ttf","svg"]}function w({files:e,context:t}){e||=["*.svg"];let n=e.flatMap(r=>Z(r,{cwd:t})).map(r=>`${t}/${r}`);if(!n.length)throw new h("The specified file globs did not resolve any files in the context.");return n}function H(e,t,n,r){return t?S(t)?(0,l.resolve)(e,t):(0,l.resolve)(e,t,`${n.toLowerCase()}.${r}`):(0,l.resolve)(e,`${n.toLowerCase()}.${r}`)}function te({generateFiles:e}){if(!e||typeof e=="boolean")return e?A:[];Array.isArray(e)||(e=[e]);let t=e.filter(n=>!A.includes(n));if(t.length)throw new T(t);return e}function ne(e){let t=new Set(te(e));return{fonts:t.has("fonts"),html:t.has("html"),css:t.has("css")}}function N(e){let t=ee(e),n=w(e),r=ne(e);return e.dest||=(0,l.resolve)(e.context,"..","artifacts"),e.fontName||="iconfont",{files:n,types:t,order:t,fontName:e.fontName,fontHeight:e.fontHeight||1e3,codepoints:e.codepoints||{},templateOptions:{baseSelector:e.baseSelector||".icon",classPrefix:e.classPrefix??"icon-"},html:r.html,css:r.css,ligature:e.ligature??!0,formatOptions:e.formatOptions||{},dest:e.dest.endsWith("/")?e.dest:`${e.dest}/`,writeFiles:r.fonts,cssDest:H(e.dest,e.cssDest,e.fontName,"css"),htmlDest:H(e.dest,e.htmlDest,e.fontName,"html"),...e.cssTemplate&&{cssTemplate:(0,l.resolve)(e.dest,e.cssTemplate)},...e.cssFontsUrl&&{cssFontsUrl:(0,l.resolve)(e.dest,e.cssFontsUrl)},...e.htmlTemplate&&{htmlTemplate:(0,l.resolve)(e.dest,e.htmlTemplate)},...typeof e.fixedWidth<"u"&&{fixedWidth:e.fixedWidth},...typeof e.centerHorizontally<"u"&&{centerHorizontally:e.centerHorizontally},...typeof e.normalize<"u"&&{normalize:e.normalize},...typeof e.round<"u"&&{round:e.round},...typeof e.descent<"u"&&{descent:e.descent}}}var D=x(require("jssha"),1),_=new AbortController,re=(0,U.promisify)(F.default),L="virtual:vite-svg-2-webfont.css",m=`\0${L}`;function k(e){let t=N(e),n,r,a,y,o,v=async i=>{i&&(t.files=w(e)),n&&(t.writeFiles=!1),o=await re(t);let c=!t.writeFiles&&(t.css||t.html);if(!n&&c){let s=[];t.css&&s.push(b(o.generateCss(),t.cssDest)),t.html&&s.push(b(o.generateHtml(),t.htmlDest)),await Promise.all(s)}if(i){let s=a==null?void 0:a.getModuleById(m);s&&y&&y(s)}};return{name:"vite-svg-2-webfont",enforce:"pre",configResolved(i){n=i.command==="build"},resolveId(i){if(i===L)return m},transform(i,c){var s;if(c===m)return((s=o==null?void 0:o.generateCss)==null?void 0:s.call(o,r))||""},load(i){if(i===m)return m},async buildStart(){if(n||$(e.context,_.signal,()=>v(!0)),await v(),n){let i;if(t.cssFontsUrl){let s=(0,C.relative)(t.dest,t.cssFontsUrl);i=s===""?".":`./${s}`}else i="/assets";let c=t.types.map(s=>{let u=o!=null&&o[s]?new D.default("SHA-256","UINT8ARRAY").update(o[s]).getHash("HEX").substring(0,8):R();return[s,`/${this.getFileName(this.emitFile({type:"asset",fileName:`assets/${t.fontName}-${u}.${s}`,source:o==null?void 0:o[s]}))}`.replace("/assets",i)]});r=Object.fromEntries(c)}},configureServer({middlewares:i,reloadModule:c,moduleGraph:s}){for(let u of t.types){let z=`${t.fontName}.${u}`;i.use(`/${z}`,(ae,d)=>{if(a=s,y=c,!o)return d.statusCode=404,d.end();let O=o[u];return d.setHeader("content-type",W[u]),d.setHeader("content-length",O.length),d.statusCode=200,d.end(O)})}},buildEnd(){_.abort()}}}var se=k,oe=F.default.templates;0&&(module.exports={templates,viteSvgToWebfont});
